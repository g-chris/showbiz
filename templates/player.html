<!DOCTYPE html>
<html>
<head>
    <title>Hollywood Game - Player</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5.0">
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- Connection Status Indicator -->
    <div id="connection-status" style="
        position: fixed;
        top: 0.625rem;
        right: 0.625rem;
        padding: 8px 0.9375rem;
        border-radius: 0.3125rem;
        font-size: 0.875rem;
        font-weight: bold;
        z-index: 9999;
        display: none;
    ">
        <span id="status-icon">â—</span>
        <span id="status-text">Connected</span>
    </div>
    
    <!-- Join Screen -->
    <div id="join-screen" class="screen active">
        <h1>ğŸ¬ Join Game</h1>
        <input type="text" id="playerName" placeholder="Your Studio Name">
        <button onclick="joinGame()">Join Game</button>
    </div>
    
    <!-- Lobby Screen -->
    <div id="lobby-screen" class="screen">
        <h1>ğŸ¬ Lobby</h1>
        <div class="info-box">
            <h2 id="studioName"></h2>
            <p>ğŸ’° Budget: $<span id="lobbyMoney">100</span>M</p>
        </div>
        <p>Waiting for host to start the game...</p>
    </div>
    
    <!-- Phase 0 Naming Screen -->
    <div id="naming-screen" class="screen">
        <h1>ğŸ¬ Name the Talent</h1>
        <div class="info-box">
            <h2>Name your <span id="roleType"></span></h2>
            <p id="roleProgress"></p>
            <p style="font-size: 0.875rem; color: #aaa;">A name is suggested - edit it or submit as-is!</p>
        </div>
        <input type="text" id="talentName" placeholder="Enter name">
        <button onclick="submitName()" id="submit-btn">Submit</button>
    </div>
    
    <!-- Phase 0 Complete Screen -->
    <div id="phase0-complete-screen" class="screen">
        <h1>ğŸ¬ Talent Pool Created!</h1>
        <div class="info-box">
            <p>All talent has been generated and assigned stats.</p>
            <p>Waiting for host to start production phase...</p>
        </div>
    </div>
    
    <!-- Phase 1 Production Screen -->
    <div id="phase1-screen" class="screen">
        <h1>ğŸ¬ Year <span id="year">1</span>, Turn <span id="turnNum">1</span></h1>
        <div class="info-box">
            <h2 id="studioNameP1"></h2>
            <p>ğŸ’° Budget: $<span id="p1Money">100</span>M</p>
            <p id="roleInventory"></p>
        </div>
        <div id="cards-area"></div>
        <div id="selection-status"></div>
    </div>

      <!-- Bidding War Screen -->
    <div id="bidding-screen" class="screen">
        <h1 style="color: #e50914; text-align: center;">ğŸ’¥ BIDDING WAR! ğŸ’¥</h1>
        
        <div class="info-box">
            <h2 id="biddingStudioName"></h2>
            <p>ğŸ’° Budget: $<span id="biddingMoney">100</span>M</p>
        </div>
        
        <div style="background: #2a2a2a; border: 3px solid #FFD700; padding: 1.25rem; margin: 1.25rem 0; border-radius: 0.3125rem;">
            <h2 style="color: #FFD700; margin-top: 0; text-align: center;">CONTESTED ROLE</h2>
            <div id="contested-card" style="text-align: center;">
                <!-- Card details will be inserted here -->
            </div>
        </div>
        
        <div class="info-box" style="background: #1a1a1a;">
            <h3 style="margin-top: 0;">Place Your Bid</h3>
            <p style="color: #aaa; font-size: 0.875rem;">Base Salary: $<span id="baseSalary">0</span>M</p>
            
            <div style="display: flex; align-items: center; justify-content: center; gap: 0.9375rem; margin: 1.25rem 0;">
                <button onclick="decreaseBid()" style="width: 3.75rem; height: 3.75rem; font-size: 2rem; background: #666;">-</button>
                <div style="text-align: center;">
                    <div style="font-size: 3rem; font-weight: bold; color: #e50914; margin: 0.625rem 0;">
                        $<span id="currentBid">0</span>M
                    </div>
                    <div style="font-size: 0.875rem; color: #aaa;">Extra Bid</div>
                </div>
                <button onclick="increaseBid()" style="width: 3.75rem; height: 3.75rem; font-size: 2rem;">+</button>
            </div>
            
            <div style="border-top: 1px solid #666; padding-top: 0.9375rem; margin-top: 0.9375rem;">
                <p style="font-size: 1.125rem; margin: 0.3125rem 0;">
                    <strong>Total Cost:</strong> 
                    <span style="color: #4CAF50; font-size: 1.5rem;">$<span id="totalCost">0</span>M</span>
                </p>
                <p id="affordabilityWarning" style="color: #ff9800; display: none; margin: 0.625rem 0;">
                    âš ï¸ Cannot afford this bid!
                </p>
            </div>
        </div>
        
        <button onclick="submitBid()" id="submit-bid-btn" style="margin-top: 1.25rem; font-size: 1.25rem; padding: 0.9375rem;">
            Submit Bid
        </button>
        
        <div id="bid-status" style="margin-top: 1.25rem;"></div>
    </div>
    
    <!-- Bidding Results Screen -->
    <div id="bidding-results-screen" class="screen">
        <h1 style="text-align: center;">ğŸ’¥ Bidding War Results ğŸ’¥</h1>
        
        <div class="info-box">
            <h2 id="resultsStudioName"></h2>
            <p>ğŸ’° Budget: $<span id="resultsMoney">100</span>M</p>
        </div>
        
        <div style="background: #2a2a2a; border: 2px solid #FFD700; padding: 1.25rem; margin: 1.25rem 0; border-radius: 0.3125rem;">
            <h2 style="color: #FFD700; margin-top: 0; text-align: center;">
                <span id="contestedRoleName">Role Name</span>
            </h2>
            <div id="all-bids" style="margin: 1.25rem 0;">
                <!-- All bids will be displayed here -->
            </div>
        </div>
        
        <div id="winner-announcement-box" style="text-align: center; padding: 30px; margin: 1.25rem 0;">
            <!-- Winner announcement will be inserted here -->
        </div>
        
        <div id="bidding-ready-status" style="margin-top: 1.25rem; text-align: center;"></div>
        <button onclick="continueAfterBidding()" style="margin-top: 1.25rem; font-size: 1.125rem; padding: 0.9375rem;">
            Continue
        </button>
    </div>
    
    <!-- Phase 1 Packaging Screen -->
    <div id="packaging-screen" class="screen">
        <h1>ğŸ¬ Package Your Spring Films</h1>
        <div class="info-box">
            <h2 id="studioNamePkg"></h2>
            <p>ğŸ’° Budget: $<span id="pkgMoney">100</span>M</p>
            <p id="pkgRoleInventory"></p>
        </div>
        
        <h3>Your Available Roles:</h3>
        <div id="available-roles"></div>
        
        <h3>Current Film Package:</h3>
        <div id="current-package" class="info-box">
            <p><em>Select roles below to add to your film...</em></p>
        </div>
        
        <div id="package-actions" style="display:none;">
            <input type="text" id="filmTitle" placeholder="Film Title" style="margin: 0.625rem 0;">
            <textarea id="filmTeaser" placeholder="Short teaser (optional)" 
                      style="width: 100%; height: 3.75rem; padding: 0.625rem; background: #333; color: white; border: 1px solid #666; margin: 0.625rem 0;"></textarea>
            <button onclick="greenlight()">Greenlight This Film!</button>
            <button onclick="clearPackage()" style="background: #666;">Clear Package</button>
        </div>
        
        <h3>Your Greenlit Films:</h3>
        <div id="greenlit-films"></div>
        
        <button onclick="finishPackaging()" id="finish-pkg-btn">Done Packaging (Releases Remaining Roles)</button>
    </div>
    
    <!-- Phase 1 Releases Screen -->
    <div id="releases-screen" class="screen">
        <h1>ğŸ¬ Spring Releases</h1>
        <div class="info-box">
            <h2 id="studioNameRel"></h2>
            <p>ğŸ’° Budget: $<span id="relMoney">100</span>M</p>
            <p>â­ Score: <span id="relScore">0</span> points</p>
        </div>
        
        <h3>Your Films:</h3>
        <div id="my-films"></div>
        
        <h3>All Releases This Season:</h3>
        <div id="all-films"></div>
        
        <div id="releases-ready-status" style="margin-top: 1.25rem; text-align: center;"></div>
        <button onclick="continueGame()" id="continue-btn" style="margin-top: 1.25rem;">Continue to Next Phase</button>
    </div>
    
    <!-- Awards Voting Screen -->
    <div id="awards-screen" class="screen">
        <h1>ğŸ† Award Season</h1>
        <div class="info-box">
            <h2 id="awardCategory">Best Picture</h2>
            <p id="votingInstructions">Vote for the best film (you cannot vote for your own)</p>
        </div>
        
        <h3>Nominees:</h3>
        <div id="nominees-area"></div>
        
        <div id="vote-status"></div>
    </div>
    
    <!-- Awards Results Screen -->
    <div id="awards-results-screen" class="screen">
        <h1>ğŸ† And the winner is...</h1>
        <div id="winner-announcement"></div>
        <div id="final-standings"></div>
        <div id="awards-ready-status" style="margin-top: 1.25rem; text-align: center;"></div>
        <button onclick="continueFromAwards()" id="continue-awards-btn" style="margin-top: 1.25rem; font-size: 1.125rem; padding: 0.9375rem;">
            Continue
        </button>
    </div>
    
    <script src="{{ url_for('static', filename='js/player.js') }}"></script>
</body>
</html>